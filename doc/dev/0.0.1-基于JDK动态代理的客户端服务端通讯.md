#### 目的：

该分支实现了一个使用 Java 套接字的基础远程过程调用（RPC）框架，没有使用netty/zk/spring。该项目的功能包括允许客户端发送请求到服务器并接收响应，同时通过代理对象和服务管理器抽象通信的复杂性。
旨在理解基本传统基本RPC框架调用流程。

------

### 项目结构：

- **`com.xiangli.client`**
  - proxy
    - `IoCClient`：负责使用套接字与服务器通信，发送请求并接收响应。
    - `ClientProxy`：作为动态代理捕获方法调用，并将其转换为 RPC 请求发送到服务器。
  - **`TestClient`**：提供测试用例，展示客户端如何请求服务端的功能。
- **`com.xiangli.common`**
  - message
    - `RpcRequest`：表示从客户端发送到服务器的请求对象。
    - `RpcResponse`：表示服务器返回给客户端的响应对象。
  - pojo
    - `User`：一个简单的用户实体类，用于演示 RPC 操作。
  - service
    - `UserService`：定义与用户相关操作的接口。
    - `UserServiceImpl`：实现 `UserService`，提供实际的功能实现。
- **`com.xiangli.server`**
  - manager
    - `ServiceManager`：负责服务的注册与查找，管理所有可用的服务实例，服务器通过它找到对应的服务实现。
  - server
    - impl
      - `SimpleRpcServer`：实现 RPC 服务器核心逻辑，接受客户端连接并分发请求到正确的服务。
      - `ThreadPoolRpcServer`：服务器的线程池版本，使用线程池并发处理多个客户端连接。
    - work
      - `WorkThread`：用于处理每个客户端请求的线程。

------

### 开发总结：

1. **客户端开发：**
   - 实现了一个客户端（`IoCClient`），使用 Java 套接字与服务器进行通信。
   - 客户端发送序列化的 `RpcRequest` 对象，并接收 `RpcResponse` 对象。
   - `ClientProxy` 类通过动态代理捕获方法调用，生成对应的 `RpcRequest` 并发送给服务器。
2. **服务器开发：**
   - 创建了 `SimpleRpcServer` 来处理来自客户端的连接请求。
   - 服务器在指定端口监听，通过 `WorkThread` 处理每个客户端的请求。
   - `WorkThread` 读取客户端发送的 `RpcRequest`，通过反射找到服务和方法，调用该方法，并将 `RpcResponse` 返回给客户端。
   - `ThreadPoolRpcServer` 使用线程池实现了并发处理，提升了性能。
3. **服务管理：**
   - `ServiceManager` 负责注册和查找服务，将服务接口映射到其实现类，服务器根据请求中的服务名找到对应的实现类进行调用。
4. **测试：**
   - 在 `TestClient` 类中提供了测试用例，展示客户端如何调用服务器的 `UserServiceImpl` 进行远程调用，并获取结果。
   - 示例中的 `UserService` 接口和 `UserServiceImpl` 实现用于模拟用户操作，比如查询用户信息和插入新用户。

------

### 示例用法：

- **客户端：**

```
java


复制代码
ClientProxy clientProxy = new ClientProxy("127.0.0.1", 8080);
UserService proxy = clientProxy.getProxy(UserService.class);
User user = proxy.getUserByUserId(1);
System.out.println("收到的用户信息：" + user);
```

- **服务器：**

```
java


复制代码
ServiceManager serviceManager = new ServiceManager();
serviceManager.registerServiceInterface(new UserServiceImpl());

SimpleRpcServer server = new SimpleRpcServer(serviceManager);
server.start(8080);  // 在 8080 端口启动服务器
```

------

### 未来改进：

- **动态服务注册：**
  - 引入 ZooKeeper 等服务发现机制，实现动态服务注册。
- **负载均衡：**
  - 添加负载均衡策略，将客户端请求分发到多个服务器实例上。
- **超时与重试机制：**
  - 为客户端请求实现重试机制，解决网络故障或服务器不可用时的问题。
